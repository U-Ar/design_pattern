# 演習メモ

## 拡張方針

- 実行はVisitorで実装 (DONE)
- 実行結果とプログラムをGUIに表示 (DONE)
- インタプリタ全体をFacade化して別パッケージに (DONE)
- 基本コマンドを生成するクラスをFactoryで作り、同じインスタンスを参照しても問題ないのでFlyweightにする (DONE)

## Issue

- (SOLVED) 線が途中で引かれなくなる。visitの様子をprintすると正しい位置に遷移はしているので、描画設定に問題がありそう。
    - 「途中まで」引かれていなかった。canvasの初期化が済む前に即座に描画しようとすることによる問題だった。トップノードのvisitの前にsleepを少し挟んだら全部描画された。

## やって思ったこと

Visitorはinterpreterと同じパッケージに置いた方が良かったかもしれない

visitメソッドを書くときに各ノードの子ノードを取得する必要があり、それをpublic Node getNode()としてしまうと公開範囲がちょっと広い感じがしたため。

一応Nodeクラス側のacceptメソッドで子ノードへのvisitを呼び出す形式にすれば今回の問題はより簡潔に解決するのだが、そうするとより柔軟なvisitが書けなくなる、つまり子ノードへの遷移の前に前処理を挟むような場合が書けなくなるため、acceptメソッドは
```java
visitor.visit(this);
```
だけにしておくのが賢明っぽい
